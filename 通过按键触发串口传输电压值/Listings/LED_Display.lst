C51 COMPILER V9.60.7.0   LED_DISPLAY                                                       02/01/2026 18:50:33 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE LED_DISPLAY
OBJECT MODULE PLACED IN .\Objects\LED_Display.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE LED_Display.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listin
                    -gs\LED_Display.lst) OBJECT(.\Objects\LED_Display.obj)

line level    source

   1          #include <stc15f2k60s2.h>
   2          #include "Common.h"
   3          #include "Delay.h"
   4          #include "PCF8591.h"
   5          
   6          code unsigned char SEG_Table[] = {
   7                  0xC0,   //0
   8                  0xF9,   //1
   9                  0xA4,   //2
  10                  0xB0,   //3
  11                  0x99,   //4
  12                  0x92,   //5
  13                  0x82,   //6
  14                  0xF8,   //7
  15                  0x80,   //8
  16                  0x90,   //9
  17                  0xC1,   //U
  18                  0xFF    //全灭
  19          };
  20          
  21          //RB2临时数组
  22          unsigned char RB2_dat_arr[] = {10,11,11,11,11,11,11,11};
  23          //RB2显示数组
  24          unsigned char RB2_show_arr[] = {10,11,11,11,11,11,11,11};
  25          
  26          //RB2电压转化函数
  27          void RB2_Change(){
  28   1              float RB2 = RB2_Value();
  29   1              unsigned int RB2_value = (unsigned int)(RB2 * 500);
  30   1              unsigned char i;
  31   1              if(RB2_value >= 100){
  32   2                      RB2_dat_arr[5] = RB2_value / 100;
  33   2                      RB2_dat_arr[6] = RB2_value % 100 / 10;
  34   2                      RB2_dat_arr[7] = RB2_value % 10;
  35   2              }
  36   1              if(RB2_value >= 10 && RB2_value < 100){
  37   2                      RB2_dat_arr[5] = 0;
  38   2                      RB2_dat_arr[6] = RB2_value / 10;
  39   2                      RB2_dat_arr[7] = RB2_value % 10;
  40   2              }
  41   1              if(RB2_value >= 0 && RB2_value < 10){
  42   2                      RB2_dat_arr[5] = 0;
  43   2                      RB2_dat_arr[6] = 0;
  44   2                      RB2_dat_arr[7] = RB2_value % 10;
  45   2              }
  46   1              for(i = 0;i < 8;i++){
  47   2                      RB2_show_arr[i] = RB2_dat_arr[i];
  48   2              }
  49   1      }
  50          
  51          //数码管显示数组
  52          void LED_Display_Show(){
  53   1              unsigned char i;
  54   1              unsigned char dat;
C51 COMPILER V9.60.7.0   LED_DISPLAY                                                       02/01/2026 18:50:33 PAGE 2   

  55   1              unsigned char com = 0;
  56   1              for(i = 0;i < 8;i++){
  57   2                      SEG(0xFF);
  58   2                      COM(0xFF);
  59   2                      COM(1<<com);
  60   2                      dat = SEG_Table[RB2_show_arr[i]];
  61   2                      if(i == 5){
  62   3                              dat = dat & 0x7F;
  63   3                      }
  64   2                      SEG(dat);
  65   2                      com++;
  66   2                      Delay50us();
  67   2                      Delay50us();
  68   2              }
  69   1              com = 0;
  70   1              SEG(0xFF);
  71   1              COM(0xFF);
  72   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    330    ----
   CONSTANT SIZE    =     12    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     16       7
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
