C51 COMPILER V9.60.7.0   LED_DISPLAY                                                       02/17/2026 15:18:27 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE LED_DISPLAY
OBJECT MODULE PLACED IN .\Objects\LED_Display.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE LED_Display.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listin
                    -gs\LED_Display.lst) OBJECT(.\Objects\LED_Display.obj)

line level    source

   1          #include <STC15F2K60S2.H>
   2          #include "Common.h"
   3          #include "KEY.h"
   4          #include "PCF8591.h"
   5          #include "Delay.h"
   6          #include "Distrance.h"
   7          
   8          code unsigned char SEG_Table[] = {
   9              0xC0,   //0
  10              0xF9,   //1
  11              0xA4,   //2
  12              0xB0,   //3
  13              0x99,   //4
  14              0x92,   //5
  15              0x82,   //6
  16              0xF8,   //7
  17              0x80,   //8
  18              0x90,   //9
  19              0x88,   //A
  20              0x8C,   //P
  21              0x86,   //E
  22              0xBF,   //-
  23              0xFF    //全灭
  24          };
  25          
  26          unsigned char Distrance_dat_arr[] = {10,14,14,14,14,14,14,14};   //测距
  27          unsigned char Parameter1_dat_arr[] = {11,1,14,14,14,13,14,14};  //模式一
  28          unsigned char Parameter2_dat_arr[] = {11,2,14,14,14,13,14,14};  //模式二
  29          unsigned char Record_dat_arr[] = {12,14,14,14,14,14,14,0};  //记录
  30          unsigned char LED_dat_arr[] = {14,14,14,14,14,14,14,14};
  31          
  32          void Distrance_Display(){
  33   1          if(sound_value >= 100){
  34   2              Distrance_dat_arr[5] = sound_value / 100;
  35   2              Distrance_dat_arr[6] = sound_value % 100 / 10;
  36   2              Distrance_dat_arr[7] = sound_value % 10;
  37   2          }
  38   1          else if(sound_value >= 10 && sound_value < 100){
  39   2              Distrance_dat_arr[5] = 14;
  40   2              Distrance_dat_arr[6] = sound_value / 10;
  41   2              Distrance_dat_arr[7] = sound_value % 10;
  42   2          }
  43   1          else if(sound_value >= 0 && sound_value < 10){
  44   2              Distrance_dat_arr[5] = 14;
  45   2              Distrance_dat_arr[6] = 14;
  46   2              Distrance_dat_arr[7] = sound_value;
  47   2          }
  48   1      }
  49          
  50          void Parameter_Display(){
  51   1          Parameter1_dat_arr[3] = Parameter_min / 10;
  52   1          Parameter1_dat_arr[4] = Parameter_min % 10;
  53   1          Parameter1_dat_arr[6] = Parameter_max / 10;
  54   1          Parameter1_dat_arr[7] = Parameter_max % 10;
C51 COMPILER V9.60.7.0   LED_DISPLAY                                                       02/17/2026 15:18:27 PAGE 2   

  55   1      
  56   1          Parameter2_dat_arr[3] = Parameter_min / 10;
  57   1          Parameter2_dat_arr[4] = Parameter_min % 10;
  58   1          Parameter2_dat_arr[6] = Parameter_max / 10;
  59   1          Parameter2_dat_arr[7] = Parameter_max % 10;
  60   1      }
  61          
  62          void Record_Display(){
  63   1          if(num <= 9){
  64   2              Record_dat_arr[7] = num;
  65   2          }
  66   1          else{
  67   2              Record_dat_arr[7] = 13;
  68   2          }
  69   1      }
  70          
  71          void LED_Display_Choose(){
  72   1          unsigned char i;
  73   1          switch(S4_cnt){
  74   2              case 0:
  75   2                  Distrance_Display();
  76   2                  for(i = 0;i < 8;i++){
  77   3                      LED_dat_arr[i] = Distrance_dat_arr[i];
  78   3                  }
  79   2                  break;
  80   2              case 1:
  81   2                  Parameter_Display();
  82   2                  switch(S5_cnt){
  83   3                      case 0:
  84   3                          for(i = 0;i < 8;i++){
  85   4                              LED_dat_arr[i] = Parameter1_dat_arr[i];
  86   4                          }
  87   3                          break;
  88   3                      case 1:
  89   3                          for(i = 0;i < 8;i++){
  90   4                              LED_dat_arr[i] = Parameter2_dat_arr[i];
  91   4                          }
  92   3                          break;
  93   3                  }
  94   2                  break;
  95   2              case 2:
  96   2                  Record_Display();
  97   2                  for(i = 0;i < 8;i++){
  98   3                      LED_dat_arr[i] = Record_dat_arr[i];
  99   3                  }
 100   2                  break;
 101   2          }
 102   1      
 103   1      }
 104          
 105          void LED_Display_Show(){
 106   1          unsigned char dat;
 107   1          unsigned char com;
 108   1          for(com = 0;com < 8;com++){
 109   2              SEG(0xFF);
 110   2              COM(1<<com);
 111   2              dat = SEG_Table[LED_dat_arr[com]];
 112   2              SEG(dat);
 113   2              Delay50us();
 114   2          }
 115   1          SEG(0xFF);
 116   1          COM(0xFF);
C51 COMPILER V9.60.7.0   LED_DISPLAY                                                       02/17/2026 15:18:27 PAGE 3   

 117   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    401    ----
   CONSTANT SIZE    =     15    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     40       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
