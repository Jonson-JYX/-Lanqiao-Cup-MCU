C51 COMPILER V9.60.7.0   LED_DISPLAY                                                       01/26/2026 13:25:41 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE LED_DISPLAY
OBJECT MODULE PLACED IN .\Objects\LED_Display.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE LED_Display.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listin
                    -gs\LED_Display.lst) OBJECT(.\Objects\LED_Display.obj)

line level    source

   1          #include <stc15f2k60s2.h>
   2          #include "Common.h"
   3          #include "Delay.h"
   4          #include "LED.h"
   5          #include "LED_Display.h"
   6          #include "DS18B20.h"
   7          
   8          code unsigned char LED_Display_Table[] = {
   9                  0xC0,   // 0
  10                  0xF9,   // 1
  11                  0xA4,   // 2
  12                  0xB0,   // 3
  13                  0x99,   // 4
  14                  0x92,   // 5
  15                  0x82,   // 6
  16                  0xF8,   // 7
  17                  0x80,   // 8
  18                  0x90,   // 9
  19                  0xFF    //全灭
  20          };
  21          
  22          //温度显示数组
  23          unsigned char Temp_Show_Arr[] = {10,10,10,10,10,10,10,10};
  24          
  25          //临时存储数组
  26          unsigned char Temp_Dat_Arr[] = {10,10,10,10,10,10,10,10};
  27          
  28          //温度转化函数
  29          void Temp_Change(){
  30   1              float temp = Temp_Value();
  31   1              unsigned int temp_dat = (unsigned int)(temp * 100);
  32   1              unsigned char i;
  33   1              if(temp_dat > 2600){
  34   2                      LED(0xFE);
  35   2              }
  36   1              else{
  37   2                      LED(0xFF);
  38   2              }
  39   1              if(temp_dat >= 10000){
  40   2                      Temp_Dat_Arr[3] = temp_dat / 10000;
  41   2                      Temp_Dat_Arr[4] = temp_dat % 10000 / 1000;
  42   2                      Temp_Dat_Arr[5] = temp_dat % 1000 / 100;
  43   2                      Temp_Dat_Arr[6] = temp_dat % 100 / 10;
  44   2                      Temp_Dat_Arr[7] = temp_dat % 10;
  45   2              }
  46   1              if(temp_dat >= 1000 && temp_dat < 10000){
  47   2                      Temp_Dat_Arr[3] = 10;
  48   2                      Temp_Dat_Arr[4] = temp_dat / 1000;
  49   2                      Temp_Dat_Arr[5] = temp_dat % 1000 / 100;
  50   2                      Temp_Dat_Arr[6] = temp_dat % 100 / 10;
  51   2                      Temp_Dat_Arr[7] = temp_dat % 10;
  52   2              }
  53   1              if(temp_dat >= 100 && temp_dat < 1000){
  54   2                      Temp_Dat_Arr[3] = 10;
C51 COMPILER V9.60.7.0   LED_DISPLAY                                                       01/26/2026 13:25:41 PAGE 2   

  55   2                      Temp_Dat_Arr[4] = 10;
  56   2                      Temp_Dat_Arr[5] = temp_dat / 100;
  57   2                      Temp_Dat_Arr[6] = temp_dat % 100 / 10;
  58   2                      Temp_Dat_Arr[7] = temp_dat % 10;
  59   2              }
  60   1              if(temp_dat >= 10 && temp_dat < 100){
  61   2                      Temp_Dat_Arr[3] = 10;
  62   2                      Temp_Dat_Arr[4] = 10;
  63   2                      Temp_Dat_Arr[5] = 0;
  64   2                      Temp_Dat_Arr[6] = temp_dat / 10;
  65   2                      Temp_Dat_Arr[7] = temp_dat % 10;
  66   2              }
  67   1              if(temp_dat >= 10 && temp_dat < 100){
  68   2                      Temp_Dat_Arr[3] = 10;
  69   2                      Temp_Dat_Arr[4] = 10;
  70   2                      Temp_Dat_Arr[5] = 0;
  71   2                      Temp_Dat_Arr[6] = temp_dat / 10;
  72   2                      Temp_Dat_Arr[7] = temp_dat % 10;
  73   2              }
  74   1              if(temp_dat >= 10 && temp_dat < 100){
  75   2                      Temp_Dat_Arr[3] = 10;
  76   2                      Temp_Dat_Arr[4] = 10;
  77   2                      Temp_Dat_Arr[5] = 0;
  78   2                      Temp_Dat_Arr[6] = 0;
  79   2                      Temp_Dat_Arr[7] = temp_dat % 10;
  80   2              }
  81   1              for(i = 0;i < 8;i++){
  82   2                      Temp_Show_Arr[i] = Temp_Dat_Arr[i];
  83   2              }
  84   1      }
  85          
  86          //数码管显示函数
  87          void LED_Display_Show(){
  88   1              unsigned char i;        //循环
  89   1              unsigned char com = 0;  //位选
  90   1              unsigned char dat;      //缓冲区
  91   1              
  92   1              for(i = 0;i < 8;i++){
  93   2                      SEG(0xFF);
  94   2                      COM(0xFF);
  95   2                      COM(1<<com);
  96   2                      dat = LED_Display_Table[Temp_Show_Arr[i]];
  97   2                      if(i == 5){
  98   3                              dat = dat & 0x7F;
  99   3                      }
 100   2                      SEG(dat);
 101   2                      com++;
 102   2                      Delay40us();
 103   2              }
 104   1              com = 0;
 105   1              SEG(0xFF);
 106   1              COM(0xFF);
 107   1      }
 108          
 109          
 110          
 111          
 112          
 113          
 114          
 115          
 116          
C51 COMPILER V9.60.7.0   LED_DISPLAY                                                       01/26/2026 13:25:41 PAGE 3   

 117          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    650    ----
   CONSTANT SIZE    =     11    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     16       7
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
