C51 COMPILER V9.60.7.0   KEY                                                               02/22/2026 17:29:31 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE KEY
OBJECT MODULE PLACED IN .\Objects\KEY.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE KEY.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\KEY.l
                    -st) OBJECT(.\Objects\KEY.obj)

line level    source

   1          #include <STC15F2K60S2.H>
   2          #include "Delay.h"
   3          #include "Timer.h"
   4          #include "EEPROM.h"
   5          
   6          unsigned char S9_cnt = 0;
   7          unsigned char num = 0;
   8          unsigned char count = 0;
   9          
  10          unsigned char Key_Scan(){
  11   1          unsigned char key = 0;
  12   1          P33 = 0;P32 = 1;
  13   1          if(P44 == 0){   //S4
  14   2              Delay100ms();
  15   2              while(P44 == 0){
  16   3                  key = 1;
  17   3              }
  18   2          }
  19   1          if(P42 == 0){   
  20   2              Delay100ms();  
  21   2              S8_flag = 1; 
  22   2              S8_cnt = 0;    
  23   2              while(P42 == 0){
  24   3                  if(S8_cnt >= 2000){ 
  25   4                      key = 2; 
  26   4                                      S8_flag = 0;    
  27   4                      break;          
  28   4                  }
  29   3              }
  30   2              if(S8_flag && key != 2){
  31   3                  key = 3; 
  32   3              }
  33   2              S8_flag = 0;
  34   2              S8_cnt = 0;
  35   2          }
  36   1          P33 = 1;P32 = 0;
  37   1          if(P44 == 0){   //S5
  38   2              Delay100ms();
  39   2              while(P44 == 0){
  40   3                  key = 4;
  41   3              }
  42   2          }
  43   1          if(P42 == 0){   //S9
  44   2              Delay100ms();
  45   2              while(P42 == 0){
  46   3                  key = 5;
  47   3              }
  48   2          }
  49   1          return key;
  50   1      }
  51          
  52          void Key_login(){
  53   1          unsigned char key = Key_Scan();
  54   1          switch(key){
C51 COMPILER V9.60.7.0   KEY                                                               02/22/2026 17:29:31 PAGE 2   

  55   2              case 1:
  56   2                  if(S9_cnt % 2 == 0){
  57   3                      count ++;
  58   3                  }
  59   2                  break;
  60   2              case 2:
  61   2                  if(S9_cnt % 2 == 0){
  62   3                      count = 0;
  63   3                  }
  64   2                  break;
  65   2              case 3:
  66   2                  if(S9_cnt % 2 == 0){
  67   3                      EEPROM_value[0] = count;
  68   3                      Write_EEPROM(EEPROM_value,0,1);
  69   3                                      if(EEPROM_value[0] == count){
  70   4                                              num++; // 仅当写入成功时，num累加
  71   4                                      }
  72   3                  }
  73   2                  break;
  74   2              case 4:
  75   2                  if(S9_cnt % 2 == 0){
  76   3                      count --;
  77   3                  }
  78   2                  break;
  79   2              case 5:
  80   2                  S9_cnt = (S9_cnt + 1) % 2;
  81   2                  break;
  82   2          }
  83   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    191    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      3       1
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
